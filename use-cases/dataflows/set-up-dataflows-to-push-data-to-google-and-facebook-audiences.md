# Set up Dataflows to push data to Google and Facebook Audiences

1\. After logging into the **CDP 365** system, find the menu on the left side of the screen.



2\. Hover the mouse over **Data** app for a popup menu to appear, then click **Destinations**.

<figure><img src="https://lh7-rt.googleusercontent.com/docsz/AD_4nXdMFK_vrX_DHZyg8Uufm3Vza39xc_ibQHop2SM8Bi-4y8BnGzxo9vyim7i-3vWYC1TCitBzQWY4hR6vV2waGS7dN3AhYk2E8II4_OY_crErcoCDY4ZrCjvr74jR8hWcUfyD327m6GCsOB90pSwupdRfFHSM?key=9gTC_f4lBNv_oDG0Gsfd0g" alt=""><figcaption></figcaption></figure>



3\. In **My Destination**, select the icon ![](https://lh7-rt.googleusercontent.com/docsz/AD_4nXdBnS7BpgcDbV7RVNNTjhX-7otuQsQ2x4WnN5DJQZCKxTZ39pGo3dXuch8u2B7sDEhN_b7eqo-ySlkQZ6qPhP-DENVXkbxUNgK7A2LIQFm44MofbGu7AVC4ZrzYv8NpBmBDTdYd3LqRvNcuQmEmy_X3o5xH?key=9gTC_f4lBNv_oDG0Gsfd0g).

<figure><img src="https://lh7-rt.googleusercontent.com/docsz/AD_4nXcm9O-PdCGS_fe_ageEAquZGMgOkWF77ka1oKlYU8CeSWdOr9VSriEwDvmY8dDNG1NV622hFWQkmWN39hYNkS-C4cnsO3INWKp1NE8WMYraVt_bKA0txLJxLL_iT1YZr2zvBHezxCj01CiQ41oejBV9C7dI?key=9gTC_f4lBNv_oDG0Gsfd0g" alt=""><figcaption></figcaption></figure>



4\. Find **Facebook Audiences** or **Google Audiences** connector.

<figure><img src="https://lh7-rt.googleusercontent.com/docsz/AD_4nXe0VbaXNdhkHuxvJMwW5tc62mfqditxpNKspj7tdv74khJQpMYHvCimd9wlnbxcHxdrP4kNixyy_cdZtCa5qUAqiFGKZZEWZOadNTy8MBxcm34nJbc88hTdXjmE8trzrc6JTji-0_1KcBKJeyNz5Iw-yVJM?key=9gTC_f4lBNv_oDG0Gsfd0g" alt=""><figcaption></figcaption></figure>



5\. After clicking **Select**, authenticate with **Facebook** or **Google** account.

<figure><img src="https://lh7-rt.googleusercontent.com/docsz/AD_4nXcu7xiOIec11-JO3Yc1p59Uo9dlXVJU2teNfqW5i8SO5N6vUJTSa1L30xXfyq0sBgwxPWw-I8j0q-BeVQ4Ja0gHyH0CTW2FkbqWAGI6H2GYFGWw4P49uE0YyLXEoeViEilsdjBDVTmYMZxA0X0fpJY2ccY?key=9gTC_f4lBNv_oDG0Gsfd0g" alt=""><figcaption></figcaption></figure>

<figure><img src="https://lh7-rt.googleusercontent.com/docsz/AD_4nXdPD9fvC8XE3tJVHSjk-1t6UWRTujU2h4jcdFPN8-Vaf42hnu4CPp9Ji2Kfupf9NkeVmh8Am-jw47lc89oC3OGPm2eqBSrlIP45ZZVpO_3P-pT4XR9BOT_jHvVJIcNcgP9PnNZgTwHpri34mrB5Okst2uQ?key=9gTC_f4lBNv_oDG0Gsfd0g" alt=""><figcaption></figcaption></figure>



6\. Input **Name** for **Destination**, and select an account.

<figure><img src="https://lh7-rt.googleusercontent.com/docsz/AD_4nXfb-sBUZy8qMnPoAZKQctjQ7vkYp2c3cmD8aATXnpo3_StbhaJLgulz7_UQFVFH3z5e9aw-_YoM1yf_YCmPh9PnH6MmSPxV8jkZLDmLQR90i47CPXV5g60ApZTo_TcaNS2lLeG0Scd-IIPCxioenowlAfQS?key=9gTC_f4lBNv_oDG0Gsfd0g" alt=""><figcaption></figcaption></figure>



7\. Click on **Connect**.

<figure><img src="https://lh7-rt.googleusercontent.com/docsz/AD_4nXeE5t4o6RZgaS0niiiphWg5i9S2NFGGoMivSS8wLW6HgMB7gLBy6jYwG0zE0rvfm9f23-bu0wLUBBBMmUUGBAYh2nHfodH77apxnOqJNhvRgAjQiv98r92UHC27vmhPPCLZqTzH_9rY5ZE8xXcgTvaVlfaC?key=9gTC_f4lBNv_oDG0Gsfd0g" alt=""><figcaption></figcaption></figure>



8\. Go back to hover the mouse over **Data** app for a popup menu to appear, then click **Batch Stream**.&#x20;

<figure><img src="https://lh7-rt.googleusercontent.com/docsz/AD_4nXexBq47lmrEHhWdzl0YzBq2IkUACdbIzg_cEfyvQVhSu7UskqRaWLPpShd34fEDxzhVhJxk2ZFAAUWKJX7Cbcp-Ru7ydglABQx4A-8bzM3bHs1CxJ1QHroxEiH6GQWEISw9zbmL8UTwbkSEBES0-IADh8AO?key=9gTC_f4lBNv_oDG0Gsfd0g" alt=""><figcaption></figcaption></figure>



9\. In **Batch Stream** tab, select the icon ![](https://lh7-rt.googleusercontent.com/docsz/AD_4nXdBnS7BpgcDbV7RVNNTjhX-7otuQsQ2x4WnN5DJQZCKxTZ39pGo3dXuch8u2B7sDEhN_b7eqo-ySlkQZ6qPhP-DENVXkbxUNgK7A2LIQFm44MofbGu7AVC4ZrzYv8NpBmBDTdYd3LqRvNcuQmEmy_X3o5xH?key=9gTC_f4lBNv_oDG0Gsfd0g).

<figure><img src="https://lh7-rt.googleusercontent.com/docsz/AD_4nXfhK0kDmUIa2G30jaXpIsQ9OKh6nhBKrYYtYLv4QEqyz_k3YUf_nJ5GVH2TTOJcb_YhQoLxkNXHup3r_jjGe4wWhFJRrABCRuG49N9VvRhMyZNb9Z9bSnmEXHzPLY3m5ebn9xIeRuui9UqOXLF5m1tcttk?key=9gTC_f4lBNv_oDG0Gsfd0g" alt=""><figcaption></figcaption></figure>



10\. Select a **Datasource**.

Select the **Segment** Datasource that you created earlier.

**NOTE: You can see how to create a Segment** **Datasource:** [here](how-to-create-a-segment-data-source.md)

<figure><img src="https://lh7-rt.googleusercontent.com/docsz/AD_4nXdNVD-GiNd4FfXZtThQ0KjtRWSIIW5P7PesRnGDEZWulUHiMXhZ84kI7tRlC7h3aigNXY6H7BV3ifFtLYyN2ucpdAYgJiVZZXzqdnIHLOnzdhlI4smuDJSJbXq6on-JjImf3Fz4EjvMdXNyfeNAce_urw-P?key=9gTC_f4lBNv_oDG0Gsfd0g" alt=""><figcaption></figcaption></figure>

After clicking the **Create stream** button, you will be redirected to the dataflow creation interface.

Select the field that you want to push to **Google** or **Facebook Audiences**.

Select **Segment** contains the customer data set that you want to push to **Google** or **Facebook Audiences**.

**NOTE: You can see how to create a new segment:** [here](../personas/segments/how-to-create-a-new-segment.md)

<figure><img src="https://lh7-rt.googleusercontent.com/docsz/AD_4nXezeZL2cA_HSi67n8roitNU4WxW9eaJ4mlRrJh_08zi4k1uXhY_iW9kY0OoQ1Zf3cI35qKWwVCIyFtq8NQIfuHDlDxa8tDbCbNjppYm8XgA1aEWUvD0kYHk4Q1YHsjFqNGWvw28ODav0bBftUmFgpcFAu0?key=YPB9PQPFr33edf7lLhL0Eg" alt=""><figcaption></figcaption></figure>



11\. At the back of the data node, click **Add column** node.

<figure><img src="https://lh7-rt.googleusercontent.com/docsz/AD_4nXc0TxmvoZzYqd4_HT4sf0-zIgN5qPtMGjf5hH1VyU3LRrZBZVtYIhc01DyqMcGx7gI2itWLdiJFqpyIj-p3jrbrXYv8tyVGrLkNwvxkArL9Rj3gZ5uXpBjxj0ubIGhbEFH7arBZNwsVbau7SMURTW5NGW4a?key=9gTC_f4lBNv_oDG0Gsfd0g" alt=""><figcaption></figcaption></figure>



12\. In the **Add column** node, for **Email** and **Phone** fields, encryption is required.

&#x20;            Use function "AUDIENCE\_ENCODE\_SHA256"

&#x20;                    Example:&#x20;

&#x20;                               AUDIENCE\_ENCODE\_SHA256(**Phone**)

&#x20;                               AUDIENCE\_ENCODE\_SHA256(**Email**)

<figure><img src="https://lh7-rt.googleusercontent.com/docsz/AD_4nXf9rDAl5nJSCaYxUdEPJBFHmuFcCrLpVtYAaICdwrzEBA5EtqseyDLOF6mLDBF4v5V-gr9CrElEtgiAMCWkTF33MBm_zBPgH8K5gdT5VCVNQ32FZRR4sjUpYtOBTtYr8ZtWWOcREDmPrQ-JGsqpJDeXT-MH?key=9gTC_f4lBNv_oDG0Gsfd0g" alt=""><figcaption></figcaption></figure>

**NOTE:** The format of the phone number depends on the type of audience.

* For GG Audiences: "+" + Country Code + Phone Number

Example: +84932123212

* For FB Audiences: Country Code + Phone Number

Example: 84932123212

* Note: Phone number must not have the first "0".
* If your data phone number starts with "0", you can use the following function to remove the first "0":

<figure><img src="https://lh7-rt.googleusercontent.com/docsz/AD_4nXe8ybatAFN8YwN8Aa8-1Utpd3sdMzzPcW8wi6IwGBXWl_m8wqXfJ0v50FyptztMTaFkQBKwtvPXCyBWStcjCIge4cYfqlySmwTPKhevkZ7LDbBIHz3rMCCwxuil8K4bf3sHJd4VAHH-enewDURANWHnRLQ8?key=9gTC_f4lBNv_oDG0Gsfd0g" alt=""><figcaption></figcaption></figure>



13\. At the back of **Add column** node, select **Destination channel**, then select **Facebook** or **Google Audiences** connected in step 7.

<figure><img src="https://lh7-rt.googleusercontent.com/docsz/AD_4nXe3h7goXgsqmsTvHpKpNXA8R5X8szl_yIpEZ18T088IqE8r0mUvCqb5Hk1VNMwzklXvLWb_kkfuEzcfmNh4szrYPEUpEael2rX-0CLZZ83x-ME9a-GjPQkX-5WJBzRTRjRGooogLPe0Gz6EtTuTN3Wb9AKd?key=9gTC_f4lBNv_oDG0Gsfd0g" alt=""><figcaption></figcaption></figure>



14\. Mapping the encrypted **Email Hash** and **Phone Hash** above with the destination column.

<figure><img src="https://lh7-rt.googleusercontent.com/docsz/AD_4nXfActVoTy3UL0I5miFWz8IryNWeNDZFnVcuSF2vmebk3_DwXoai1l1BYqPa8tpeDRL4bErselvbd_5ZwxQnhu6mWsxR-BC-1bcqqrPKJ_vhfbJWq3dOVaIrLcKHI_76aawfsFizFUnSXa-fKMxrY0C95AKm?key=9gTC_f4lBNv_oDG0Gsfd0g" alt=""><figcaption></figcaption></figure>

**Select Table**

* Create new audience: create new audience and push data into it
* Existing audience: push data into an existing audience

**Write Mode**

* Insert Only: Used to push new data to the audience
* Replace: Used to entirely replace old data with new data
* Remove: Used to delete data that matches the uploaded data\




15\. Click the **Save** Button.&#x20;

<figure><img src="https://lh7-rt.googleusercontent.com/docsz/AD_4nXfXjDCl-pSma8TWH9owUzpTUGpxdIIccj7TYfy1M9ArYHRjjS-QWHCavLhsUsPqZZmW4SeT9ftgZ3Y1j_X6-vpTKUsSWHqQyLwtv5fkY157nQGp0rZA-uR-eF843emROA6aDIQhe595K3YjE49htPQ_uRJf?key=9gTC_f4lBNv_oDG0Gsfd0g" alt=""><figcaption></figcaption></figure>



**ACTIVATE THE DATAFLOW**

<figure><img src="https://lh7-rt.googleusercontent.com/docsz/AD_4nXeK2HxoiZS4oVHieDYNeqdA0t4u3ZHj73BY1VqtDodB-t4EQJZNBg7BgC7ojkTdNifuFWdqn7QR23tPT_iWzJR_aGNRxsCMBggtKFzD5RNZZ06hahG2tgoWfGCe_CD7XBo83495kwTitso-Zy0mWaCR37re?key=9gTC_f4lBNv_oDG0Gsfd0g" alt=""><figcaption></figcaption></figure>

After clicking the **Activate** button, the data changes status from **Paused** to **Active**.\


<figure><img src="../../.gitbook/assets/image (3243).png" alt=""><figcaption></figcaption></figure>



**FORCE RUN**

This is used to run the dataflow immediately without timeout in dataflows.\


<figure><img src="https://lh7-rt.googleusercontent.com/docsz/AD_4nXfpViG3W593wtjdwvlxhdy8_Kd5U2mTgU1aQIR8dFEStq_uoNL18uSeNWGgZ2LvRrIBGgaGQeZPelhPYNSDVP_5cjiRudVm3LuCWXr372QTo77CwZpN_abEfB4z-xBN9Fze29HbgxHGt_BEdOOwcHVlfpRR?key=9gTC_f4lBNv_oDG0Gsfd0g" alt=""><figcaption></figcaption></figure>

<figure><img src="https://lh7-rt.googleusercontent.com/docsz/AD_4nXfq5-P3x14TvWjXcrqAs_jbymHbmzRzBer1HUZklMPnp_DVxbIkmBDhSPttzgBR62hWEXVO6BzFd4zT8UIGqU0srhi4k2zYaWG7NnW1Apg47NvFaAkz3XrJ0NpWOrKpx0RY0SdoUgYIs8V3sXNsTx3X57EE?key=9gTC_f4lBNv_oDG0Gsfd0g" alt=""><figcaption></figcaption></figure>

